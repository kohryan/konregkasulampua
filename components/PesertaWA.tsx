import React, { useState } from "react";
import { useRouter } from 'next/router'


export function Peserta() {
  const router = useRouter();
  const [password, setPassword] = useState("");
  const [warning, setWarning] = useState("");

  const playSound = () => {
    const audio = new Audio("/error.mp3");
    audio.play();
  };

  const phone =  ["081349099330", "08112953666", "081230063006", "089630085881", "081806027400", "08125025036", "082125029807", "085241871002", "0811400427", "082344583333", "087716558874", "085242549012", "085242172696", "081340040652", "085241597926", "082130831573", "08125817497", "081346865072", "081349582879", "082115508834", "081341678899", "08114358200", "081213082400", "081340002183", "081340109599", "081319478920", "082346713317", "085755621792", "082345114110", "08124176498", "085340199646", "08121685031", "082158747495", "0811406671", "081317604401", "081254926735", "081341511657", "08125023015", "081242059475", "08125040252", "082157062625", "081328173156", "087815639119", "081521504475", "081521514722", "081215998679", "081347789041", "085348510523", "081344802429", "085244506683", "08114811001", "082156972220", "081258843701", "08567650302", "08164508282", "081347601140", "085244130119", "081344684850", "082134616069", "081344650113", "082311259355", "08125782674", "085216192938", "082187538571", "081250053666", "081355387363", "082291985463", "085239772228", "081343000043", "081344444717", "085216035206", "082350570218", "081352656158", "082312526636", "085313507901", "081317956195", "081244419278", "081342357732", "081355561922", "081384459263", "081353027288", "08124862423", "081244072805", "081210619231", "0811435891", "085295480903", "082372949484", "081344001995", "082316241467", "087844322838", "085255891478", "081342291114", "08124844080", "085398811475", "082199352119", "085250512400", "08124490360", "089602446442", "081322134113", "081295112889", "082254652470", "081931153740", "085268344325", "089635933726", "081242699340", "082199565648", "08118181610", "0817161154", "081356634266", "081349658815", "085254289102", "08114032110", "081330544015", "081399325567", "082121266488", "085228518235", "085214413362", "082238603423", "082239351728", "081394242057", "082199040502", "081343161688", "081328878640", "0852303038192", "085219100181", "082115124445", "081344595002", "081343032001", "081290835428", "085241177951", "085163589198", "081342378083", "082299429098", "085344870086", "085700699519", "081351289800", "081340247077", "081241490628", "085299463166", "081347380837", "082291036038", "081240894498", "082399381005", "082239508321", "081240389367", "081344007120", "081247443071", "081344800850", "081343097350", "081342273558", "082122998328", "081337738673", "081248699338", "081389800600", "082198622142", "08114890909", "082197935611", "08124801774", "08114608671", "081344897325", "08124899896", "08118601542", "081342435496", "081355444622", "085241758680", "081247995262", "08114090614", "081245677484", "081341509110", "085394499582", "08114006041", "081241142190", "085217939890", "085268370863", "08114092684", "081213318884", "08114091672", "08114001603", "085255068678", "085241620696", "08115135171", "08114032110", "085241772385", "08114057403", "08114000997", "082225976960", "082291970227", "081806571398", "085242255018", "082227468884", "082192121939", "08179819985", "08114533593", "081257337529", "082293253593", "082293253593", "08114533593", "081244756614", "0813720399440", "082198569444", "085311326562", "08114008525", "081251016279", "085348091898", "081349356151", "085348091898", "08115201009", "081349016207", "081281360387", "08114009835", "085256446597", "085256446597", "081373133737", "08124450829", "082258521275", "082193314095", "081297957580", "081341666297", "081388583633", "081212049450", "085399034849", "082111753945", "081372039940","082291899097","08114037603", "082311142727", "081219529291", "081322114421", "082293615387", "08114094300", "081328405353", "085380755323", "08115912180"];

  const submitForm = (e) => {
    e.preventDefault()
    if (password.trim() === '') {
      setWarning("Please enter a password");
      playSound();
    } else if (!phone.includes(password)) {
      setWarning("Incorrect password");
      playSound();
    } else {
      setWarning("");
      router.push("https://chat.whatsapp.com/EhWJcq8cMr6GeT7G9IRIQB");
    }
  };

  const clearWarning = () => {
    setWarning("");
  };

  return (
    <>
                {warning && 
                  <div role="alert">
                  <div className="bg-red-500 text-sm text-white font-bold rounded-t px-4 py-2">
                    Peringatan!
                  </div>
                  <div className="border border-t-0 text-sm border-red-400 rounded-b bg-red-100 px-4 py-1 text-red-700">
                    <p>- Nomor HP tidak boleh kosong!</p>
                    <p>- Nomor HP yang Anda Masukkan Tidak Ditemukan, Silakan Coba Lagi!</p>
                    <p>- Jika Anda baru mengisi formulir peserta, mohon tunggu paling lama 10 menit kemudian refresh laman ini dan coba lagi</p>
                  </div>
                  <audio src="error.mp3" autoPlay />
                </div>
                }
                <form onClick={clearWarning} onSubmit={submitForm}>
                  <div className="relative w-full mt-3 mb-3">
                    <input
                      type="text"
                      className="border px-3 py-3 placeholder-gray-300 text-gray-900 bg-white rounded-lg text-sm shadow border-blue-500 focus:outline-none focus:ring w-full ease-linear transition-all duration-150"
                      placeholder="Nomor HP (WA) Terdaftar" value={password} onChange={e => setPassword(e.target.value)}
                    />
                  </div>

                  <div className="text-center bg-blue-500 rounded-lg">
                    <input
                      className="text-white active:bg-blue-500 hover:bg-blue-600 text-sm font-medium px-6 py-3 rounded-lg shadow hover:shadow-lg outline-none focus:outline-none mr-1 mb-1 w-full ease-linear transition-all duration-150"
                      type="submit" value="Bergabung"
                    />
                  </div>
                </form>
    </>
  );
}
